{
    "name": "Alex-arrives-in-town",
    "desc": "After the battle with the archer in the forest, Alex arrives in the town at the candy shop may or may not be closed depending on how many turns the battle took.",
    "kind": "story",
    "pages": [
        {
            "name": "Arrive in town",
            "music": "homeland.mp3",
            "bg": "bg\/city.jpg",
            "text": "Alex arrives in town, still looking forward to go to the candy shop. {o.Alex.g@He} can hear the bell tower ring signalling that it is {@time}",
            "choices": [
                {
                    "displayText": "Next",
                    "desc": "",
                    "page": "Go to candy shop",
                    "disabled": "Enabled",
                    "groups": []
                },
                {
                    "displayText": "Go to pub",
                    "desc": "",
                    "page": "Arrive in town",
                    "disabled": "Disabled",
                    "groups": [
                        {
                            "conds": [],
                            "effects": [
                                [
                                    "changeEvent",
                                    {
                                        "type": "Character",
                                        "scene": "Custom",
                                        "event": "NomadicLegionnaireBackstory"
                                    }
                                ]
                            ]
                        }
                    ]
                }
            ],
            "onload": [
                {
                    "conds": [
                        [
                            "checkVar",
                            {
                                "scope": "Scene",
                                "vr": "tookTooLongInBattle",
                                "operator": "==",
                                "vl": "true"
                            }
                        ]
                    ],
                    "effects": [
                        [
                            "enableChoice",
                            {
                                "toggle": "Enabled",
                                "choice": "Go to pub"
                            }
                        ],
                        [
                            "enableChoice",
                            {
                                "toggle": "Disabled",
                                "choice": "Next"
                            }
                        ]
                    ]
                }
            ],
            "modules": {},
            "modulesVars": {
                "time": [
                    {
                        "text": "3pm. The candy shop closes at 5pm, so {o.Alex.g@he} made it just on time!"
                    },
                    {
                        "text": "6pm. The candy shop closed at 5pm, so Alex decides to change {o.Alex.g@his2} plans and go to the pub instead.",
                        "checks": [
                            [
                                "Scene",
                                "tookTooLongInBattle",
                                "!=",
                                "false"
                            ]
                        ]
                    }
                ]
            }
        },
        {
            "name": "Go to candy shop",
            "music": "homeland.mp3",
            "bg": "bg\/CircusCircus_1.jpg",
            "text": "Alex arrives at the candy shop.",
            "choices": [
                {
                    "displayText": "Go inside",
                    "desc": "",
                    "page": "Inside Shop",
                    "disabled": "Enabled",
                    "groups": []
                }
            ],
            "onload": [],
            "modules": [],
            "modulesVars": []
        },
        {
            "name": "Inside Shop",
            "music": "homeland.mp3",
            "bg": "bg\/CircusCircus_1.jpg",
            "text": "The inside of the candy shop is pretty sweet! There are lots of candies to choose from.",
            "choices": [
                {
                    "displayText": "Choose the gummies",
                    "desc": "Alex picked up the gummies and took them to the cashier.",
                    "page": "Ask Pay",
                    "disabled": "Enabled",
                    "groups": [
                        {
                            "conds": [],
                            "effects": [
                                [
                                    "setVar",
                                    {
                                        "scope": "Event",
                                        "vr": "price",
                                        "operator": "=",
                                        "vl": "2"
                                    }
                                ],
                                [
                                    "setVar",
                                    {
                                        "scope": "Event",
                                        "vr": "sweet",
                                        "operator": "=",
                                        "vl": "Gummies"
                                    }
                                ]
                            ]
                        }
                    ]
                },
                {
                    "displayText": "Choose the hard candies",
                    "desc": "Alex picked up the hard candies and took them to the cashier.",
                    "page": "Ask Pay",
                    "disabled": "Enabled",
                    "groups": [
                        {
                            "conds": [],
                            "effects": [
                                [
                                    "setVar",
                                    {
                                        "scope": "Event",
                                        "vr": "price",
                                        "operator": "=",
                                        "vl": "3"
                                    }
                                ],
                                [
                                    "setVar",
                                    {
                                        "scope": "Event",
                                        "vr": "sweet",
                                        "operator": "=",
                                        "vl": "Hard Candies"
                                    }
                                ]
                            ]
                        }
                    ]
                },
                {
                    "displayText": "Choose nothing and leave",
                    "desc": "",
                    "page": "Leave",
                    "disabled": "Enabled",
                    "groups": []
                }
            ],
            "onload": [],
            "modules": [],
            "modulesVars": []
        },
        {
            "name": "Ask Pay",
            "music": "homeland.mp3",
            "bg": "bg\/CircusCircus_1.jpg",
            "text": "The cashier asks Alex for {e@price} moenys for the {e@sweet}.",
            "choices": [
                {
                    "displayText": "Pay",
                    "desc": "",
                    "page": "Pay",
                    "disabled": "Enabled",
                    "groups": [
                        {
                            "conds": [],
                            "effects": [
                                [
                                    "setVar",
                                    {
                                        "scope": "Global",
                                        "vr": "money",
                                        "operator": "-",
                                        "vl": "{e@price}"
                                    }
                                ]
                            ]
                        }
                    ]
                },
                {
                    "displayText": "Choose something else",
                    "desc": "",
                    "page": "Inside Shop",
                    "disabled": "Enabled",
                    "groups": []
                }
            ],
            "onload": [],
            "modules": [],
            "modulesVars": []
        },
        {
            "name": "Leave",
            "music": "homeland.mp3",
            "bg": "bg\/CircusCircus_1.jpg",
            "text": "Alex walked outside.",
            "choices": [
                {
                    "displayText": "Done",
                    "desc": "",
                    "page": "Arrive in town",
                    "disabled": "Enabled",
                    "groups": [
                        {
                            "conds": [],
                            "effects": [
                                [
                                    "changeEvent",
                                    {
                                        "type": "Other",
                                        "scene": "CandyShop",
                                        "event": "Left-the-candy-shop"
                                    }
                                ]
                            ]
                        }
                    ]
                }
            ],
            "onload": [
                {
                    "conds": [],
                    "effects": [
                        [
                            "recruitChar",
                            {
                                "name": "Astraea"
                            }
                        ]
                    ]
                }
            ],
            "modules": [],
            "modulesVars": []
        },
        {
            "name": "Pay",
            "music": "homeland.mp3",
            "bg": "bg\/CircusCircus_1.jpg",
            "text": "Alex payed for the {e@sweet}.",
            "choices": [
                {
                    "displayText": "Leave",
                    "desc": "",
                    "page": "Leave",
                    "disabled": "Enabled",
                    "groups": []
                }
            ],
            "onload": [
                {
                    "conds": [
                        [
                            "checkVar",
                            {
                                "scope": "Event",
                                "vr": "sweet",
                                "operator": "==",
                                "vl": "Gummies"
                            }
                        ]
                    ],
                    "effects": [
                        [
                            "changeItemQuantity",
                            {
                                "name": "Gummy",
                                "amount": "1"
                            }
                        ]
                    ]
                },
                {
                    "conds": [
                        [
                            "checkVar",
                            {
                                "scope": "Event",
                                "vr": "sweet",
                                "operator": "==",
                                "vl": "Hard Candy"
                            }
                        ]
                    ],
                    "effects": [
                        [
                            "changeItemQuantity",
                            {
                                "name": "Hard Candy",
                                "amount": "1"
                            }
                        ]
                    ]
                }
            ],
            "modules": [],
            "modulesVars": []
        }
    ],
    "vrs": {
        "price": "0",
        "sweet": "false"
    }
}