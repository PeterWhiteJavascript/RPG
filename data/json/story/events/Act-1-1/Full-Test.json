{
    "name": "Full Test",
    "desc": "Testing all of the features",
    "kind": "story",
    "vrs": {
        "hasSpear": "no",
        "initialDefy": "0"
    },
    "pages": [
        {
            "name": "Arrive at Gate",
            "music": "prebattle.mp3",
            "bg": "bg\/959396-river.jpg",
            "text": "{@pickedUpSpear}",
            "choices": [
                {
                    "displayText": "Talk to the gatekeeper.",
                    "desc": "Alex talks to the gatekeeper.",
                    "page": "Talk to Gatekeeper",
                    "disabled": "Enabled",
                    "groups": []
                },
                {
                    "displayText": "Pick up spear that is lying against the gate.",
                    "desc": "Alex picks up the spear.",
                    "page": "Arrive at Gate",
                    "disabled": "Disabled",
                    "groups": [
                        {
                            "conds": [],
                            "effects": [
                                [
                                    "setVar",
                                    {
                                        "scope": "event",
                                        "vr": "hasSpear",
                                        "vl": "yes"
                                    }
                                ]
                            ]
                        }
                    ]
                },
                {
                    "displayText": "Drop Spear",
                    "desc": "Alex drops the spear.",
                    "page": "Arrive at Gate",
                    "disabled": "Disabled",
                    "groups": [
                        {
                            "conds": [],
                            "effects": [
                                [
                                    "setVar",
                                    {
                                        "scope": "event",
                                        "vr": "hasSpear",
                                        "vl": "dropped"
                                    }
                                ],
                                [
                                    "enableChoice",
                                    {
                                        "toggle": "Disabled",
                                        "choice": "Drop Spear"
                                    }
                                ],
                                [
                                    "changeStat",
                                    {
                                        "stat": "Pragmatic",
                                        "val": "1"
                                    }
                                ]
                            ]
                        }
                    ]
                }
            ],
            "onload": [
                {
                    "conds": [
                        [
                            "checkVar",
                            {
                                "scope": "event",
                                "vr": "hasSpear",
                                "vl": "yes"
                            }
                        ]
                    ],
                    "effects": [
                        [
                            "enableChoice",
                            {
                                "toggle": "Disabled",
                                "choice": "Pick up spear that is lying against the gate."
                            }
                        ],
                        [
                            "enableChoice",
                            {
                                "toggle": "Enabled",
                                "choice": "Drop Spear"
                            }
                        ]
                    ]
                },
                {
                    "conds": [
                        [
                            "checkVar",
                            {
                                "scope": "event",
                                "vr": "hasSpear",
                                "vl": "no"
                            }
                        ]
                    ],
                    "effects": [
                        [
                            "enableChoice",
                            {
                                "toggle": "Disabled",
                                "choice": "Drop Spear"
                            }
                        ],
                        [
                            "enableChoice",
                            {
                                "toggle": "Enabled",
                                "choice": "Pick up spear that is lying against the gate."
                            }
                        ]
                    ]
                }
            ],
            "modules": {},
            "modulesVars": {
                "pickedUpSpear": [
                    {
                        "text": "Alex arrives at a gate.\n\nAlex sees the gatekeeper that seems to be guarding the gate. \n\n{o.Alex.g@A} also notices a spear on the ground."
                    },
                    {
                        "text": "The guard yells at Alex to drop the spear.",
                        "checks": [
                            [
                                "event",
                                "hasSpear",
                                "==",
                                "yes"
                            ]
                        ]
                    },
                    {
                        "text": "The spear that Alex had is on the ground now.\n\nThe guard seems pleased.",
                        "checks": [
                            [
                                "event",
                                "hasSpear",
                                "==",
                                "dropped"
                            ]
                        ]
                    }
                ]
            }
        },
        {
            "name": "Talk to Gatekeeper",
            "music": "prebattle.mp3",
            "bg": "bg\/959396-river.jpg",
            "text": "{@holdingSpear}",
            "choices": [
                {
                    "displayText": "Pass through the gate",
                    "desc": "Alex passes through the gate.",
                    "page": "Start of path",
                    "disabled": "Enabled",
                    "groups": []
                },
                {
                    "displayText": "Fight the guard",
                    "desc": "Alex decides to attack the guard with the spear.",
                    "page": "Attack Gatekeeper",
                    "disabled": "Disabled",
                    "groups": [
                        {
                            "conds": [],
                            "effects": [
                                [
                                    "changeStat",
                                    {
                                        "stat": "Nepotist",
                                        "val": "-1"
                                    }
                                ],
                                [
                                    "changeStat",
                                    {
                                        "stat": "Kind",
                                        "val": "-1"
                                    }
                                ]
                            ]
                        }
                    ]
                },
                {
                    "displayText": "Drop the Spear",
                    "desc": "Alex finally decides to drop the spear as to not cause more trouble.",
                    "page": "Talk to Gatekeeper",
                    "disabled": "Disabled",
                    "groups": [
                        {
                            "conds": [],
                            "effects": [
                                [
                                    "setVar",
                                    {
                                        "scope": "event",
                                        "vr": "hasSpear",
                                        "vl": "dropped"
                                    }
                                ],
                                [
                                    "setVar",
                                    {
                                        "scope": "event",
                                        "vr": "initialDefy",
                                        "vl": "1"
                                    }
                                ]
                            ]
                        }
                    ]
                }
            ],
            "onload": [
                {
                    "conds": [
                        [
                            "checkVar",
                            {
                                "scope": "event",
                                "vr": "hasSpear",
                                "vl": "yes"
                            }
                        ]
                    ],
                    "effects": [
                        [
                            "enableChoice",
                            {
                                "toggle": "Enabled",
                                "choice": "Fight the guard"
                            }
                        ],
                        [
                            "enableChoice",
                            {
                                "toggle": "Disabled",
                                "choice": "Pass through the gate"
                            }
                        ],
                        [
                            "enableChoice",
                            {
                                "toggle": "Enabled",
                                "choice": "Drop the Spear"
                            }
                        ]
                    ]
                },
                {
                    "conds": [
                        [
                            "checkVar",
                            {
                                "scope": "event",
                                "vr": "hasSpear",
                                "vl": "dropped"
                            }
                        ]
                    ],
                    "effects": [
                        [
                            "enableChoice",
                            {
                                "toggle": "Disabled",
                                "choice": "Fight the guard"
                            }
                        ],
                        [
                            "enableChoice",
                            {
                                "toggle": "Enabled",
                                "choice": "Pass through the gate"
                            }
                        ],
                        [
                            "enableChoice",
                            {
                                "toggle": "Disabled",
                                "choice": "Drop the Spear"
                            }
                        ]
                    ]
                }
            ],
            "modules": {},
            "modulesVars": {
                "holdingSpear": [
                    {
                        "text": "The guard opens the gate to let Alex through."
                    },
                    {
                        "text": "The guard asks Alex if {o.Alex.g@a} is looking for a fight.",
                        "checks": [
                            [
                                "event",
                                "hasSpear",
                                "==",
                                "yes"
                            ]
                        ]
                    },
                    {
                        "text": "The guard opens the gate to let Alex through, though he scoffs at Alex's initial defiance.",
                        "checks": [
                            [
                                "event",
                                "initialDefy",
                                "==",
                                1
                            ]
                        ]
                    }
                ]
            }
        },
        {
            "name": "Attack Gatekeeper",
            "music": "battle.mp3",
            "bg": "bg\/959396-river.jpg",
            "text": "TO DO: BATTLE SCENE OR SOMETHING.",
            "choices": [],
            "onload": [],
            "modules": [],
            "modulesVars": []
        },
        {
            "name": "Start of path",
            "music": "the_usual.mp3",
            "bg": "bg\/959396-river.jpg",
            "text": "Alex starts walking down the dirt path past the gate. {o.Alex.g@A} encounters a fork in the road.",
            "choices": [
                {
                    "displayText": "Go Left",
                    "desc": "Alex goes left",
                    "page": "Left path",
                    "disabled": "Enabled",
                    "groups": []
                },
                {
                    "displayText": "Go Right ",
                    "desc": "Alex goes right",
                    "page": "Right path",
                    "disabled": "Enabled",
                    "groups": []
                }
            ],
            "onload": [],
            "modules": [],
            "modulesVars": []
        },
        {
            "name": "Left path",
            "music": "the_usual.mp3",
            "bg": "bg\/959396-river.jpg",
            "text": "",
            "choices": [],
            "onload": [],
            "modules": [],
            "modulesVars": []
        },
        {
            "name": "Right path",
            "music": "the_usual.mp3",
            "bg": "bg\/959396-river.jpg",
            "text": "",
            "choices": [],
            "onload": [],
            "modules": [],
            "modulesVars": []
        }
    ],
    "onload": []
}