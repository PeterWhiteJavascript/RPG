
<?php
forEach($pages as $key => $value){
    forEach($value['choices'] as $key2 => $value2){
        $display = $value2['displayText'];
        $desc = $value2['desc'];
        $page = $value2['page'];
        $disabled = $value2['disabled']
?>
        <li class="choice-<?php echo $key; ?> <?php echo $key; ?> choice-li">
            <a class="remove-choice">
                <div class="btn btn-default">x</div>
            </a>
            <div><p class="editor-descriptor">Display Text: </p><input class="display-text" value="<?php echo $display; ?>"></div>
            <div><p class="editor-descriptor">Enabled: </p><div class="btn btn-default disable"><?php echo $disabled; ?></div></div>
            <div><p class="editor-descriptor">On selected text displayed: </p><textarea class="desc-text"><?php echo $desc; ?></textarea></div>
            <div><p class="editor-descriptor">To Page: </p><select class="pages-to" initialValue="<?php echo $page; ?>"></select></div>
            <p class="editor-descriptor">Condition/Effect Groups: </p>
            <a class="add-new-group"><div class="btn btn-default">Add Group</div></a>
            <a class="add-new-condition"><div class="btn btn-default">Add Condition</div></a>
            <a class="add-new-effect"><div class="btn btn-default">Add Effect</div></a>
            <?php
            if(isset($value2['group'])){
                $groups = $value2['group'];
                forEach($groups as $group => $v){
            ?>
            <div class="cond-group">
                <a class="remove-choice"><div class="btn btn-default">x</div></a>
                <div class="conditions">
                    <p class="editor-descriptor">Conditions: </p>
                    <?php
                    if(isset($v['cond'])){
                        $conds = $v['cond'];
                        forEach($conds as $cond => $val){
                            switch($val[0]){
                                case "checkVar":
                    ?>
                                    <div class="condition">
                                        <a class="remove-choice">
                                            <div class="btn btn-default">x</div>
                                        </a>
                                        <select class="conditions-select" value="<?php echo $val[0] ?>"></select>
                                        <ul class="cond-cont">
                                            <li><select class="cond-var-type" initialValue="<?php echo $val[1]['scope']; ?>"></select></li>
                                            <li>
                                                <div class="cond">
                                                    <select class="cond-vars" initialValue="<?php echo $val[1]['vr']; ?>"></select>
                                                    <input class="cond-vals" value="<?php echo $val[1]['vl']; ?>">
                                                </div>
                                            </li>
                                        </ul>
                                    </div>
                    <?php
                                    break;
                            }
                        }

                    }
                    ?>
                </div>
                <div class="effects">
                    <p class="editor-descriptor">Effects: </p>
                    <?php
                    if(isset($v['effect'])){
                        $effects = $v['effect'];
                        forEach($effects as $effect => $val2){
                            switch($val2[0]){
                                case "setVar":
                    ?>
                                <div class="effect">
                                    <a class="remove-choice">
                                        <div class="btn btn-default">x</div>
                                    </a>
                                    <select class="effects-select" value="<?php echo $val2[0] ?>"></select>
                                    <ul class="effect-cont">
                                        <li><select class="effect-var-type" initialValue="<?php echo $val2[1]['scope'];?>"></select></li>
                                        <li><select class="eff-vars" initialValue="<?php echo $val2[1]['vr']; ?>"></select></li>
                                        <li><input class="eff-vals" value="<?php echo $val2[1]['vl']; ?>"></li>
                                    </ul>
                                </div>

                    <?php
                                    break;
                                case "changePage":
                    ?>
                                <div class="effect">
                                    <a class="remove-choice">
                                        <div class="btn btn-default">x</div>
                                    </a>
                                    <select class="effects-select" initialValue="<?php echo $val2[0] ?>"></select>
                                    <ul class="effect-cont">
                                        <li><select class="effect-pages" initialValue="<?php echo $val2[1]['page']?>"></select></li>
                                        <li><textarea class="effect-page-to-desc" placeholder="display text"><?php echo $val2[1]['desc']?></textarea></li>
                                    </ul>
                                </div>
                    <?php
                                    break;
                                case "enableChoice":
                    ?>
                                <div class="effect">
                                    <a class="remove-choice">
                                        <div class="btn btn-default">x</div>
                                    </a>
                                    <select class="effects-select" initialValue="<?php echo $val2[0] ?>"></select>
                                    <ul class="effect-cont">
                                        <li><select class="page-choices <?php echo $key;?>" initialValue="<?php echo $val2[1]['choice']?>"></select></li>
                                    </ul>
                                </div>
                    <?php
                                    break;
                                case "changeEvent":
                    ?>
                                <div class="effect">
                                    <a class="remove-choice">
                                        <div class="btn btn-default">x</div>
                                    </a>
                                    <select class="effects-select" initialValue="<?php echo $val2[0] ?>"></select>
                                    <ul class="effect-cont">
                                        <li><select class="scene-to <?php echo $key;?>" initialValue="<?php echo $val2[1]['scene']?>"></select></li>
                                        <li><select class="event-to <?php echo $key;?>" initialValue="<?php echo $val2[1]['event']?>"></select></li>
                                    </ul>
                                </div>
                    <?php
                                    break;
                            }
                        }
                    }
                    ?>
                </div>
            </div>
            <?php
                }
            }
            ?>
        </li>
<?php

    }
}
?>
